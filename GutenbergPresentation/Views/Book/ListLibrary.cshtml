@model List<BookViewModel>

@{
    ViewData["Title"] = "Library Results";
}

<style>
    .library-button {
        background-color: orange;
        font-size: 15px;
        padding: 3px 10px;
    }

    .book-card {
        margin-bottom: 15px;
    }

        .book-card img {
            width: 100%;
            height: auto;
        }
</style>

<h2>Library Results</h2>

<div class="row">
    @if (Model != null && Model.Any())
    {
        foreach (var book in Model)
        {
            <div class="col-md-3 mb-3">
                <div class="card book-card">
                    @if (book.Formats != null && book.Formats.ContainsKey("image/jpeg"))
                    {
                        <img src="@book.Formats["image/jpeg"]" class="card-img-top" alt="Cover Image">
                    }
                    <div class="card-body">
                        <h5 class="card-title">@book.Title</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"><strong>Authors:</strong> @string.Join(", ", book.Authors.Select(a => $"{a.Name} (Birth: {a.BirthYear}, Death: {a.DeathYear})"))</li>
                            <li class="list-group-item">
                                <strong>Subjects:</strong>
                                @if (book.Subjects != null && book.Subjects.Count > 1)
                                {
                                    <span>@string.Join(", ", book.Subjects.Take(1))...</span>
                                }
                                else
                                {
                                    <span>@string.Join(", ", book.Subjects)</span>
                                }
                            </li>
                            <li class="list-group-item"><strong>Languages:</strong> @string.Join(", ", book.Languages)</li>
                        </ul>
                        <a class="btn library-button" href="@Url.Action("DeleteFromLib", "Book", new { bookId = book.Id })">Sil</a>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <p>No books found.</p>
    }
</div>
